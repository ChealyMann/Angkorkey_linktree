<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Angkorkey</title>
  <meta name="description" content="Futuristic link-in-bio page" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="img/logo.jpg">
  <style>
    :root {
      --neon: 255 99 247;
      --aqua: 34 211 238;
      --vio: 139 92 246;
      --bg: 2 6 23;
    }

    html { scroll-behavior: smooth }

    .halo::before {
      content: "";
      position: absolute; inset: -2px; z-index: -1;
      background: conic-gradient(from 0deg,
      rgba(var(--aqua),.7), rgba(var(--neon),.7), rgba(var(--vio),.7), rgba(var(--aqua),.7));
      filter: blur(18px) saturate(130%);
      border-radius: 28px;
      animation: spin 12s linear infinite;
      mask: linear-gradient(#000, #000) content-box, linear-gradient(#000,#000);
      -webkit-mask: linear-gradient(#000, #000) content-box, linear-gradient(#000,#000);
      padding: 2px;
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: .45;
    }

    .glass { background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02)); }
    .gridlines { background-image: linear-gradient(rgba(255,255,255,.06) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.06) 1px, transparent 1px); background-size: 38px 38px; mask-image: radial-gradient(80% 60% at 50% 30%, #000 60%, transparent 100%); }

    @keyframes spin { to { transform: rotate(360deg) } }
    @keyframes float { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-6px) } }

    /* Toast notification */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(34, 211, 238, 0.95);
      color: #000;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.3s;
      box-shadow: 0 4px 20px rgba(34, 211, 238, 0.4);
    }
    .toast.show {
      opacity: 1;
    }
  </style>
</head>
<body class="relative min-h-screen bg-[rgb(var(--bg))] text-white overflow-hidden">
<canvas id="bg" class="fixed inset-0 -z-10"></canvas>
<div class="pointer-events-none fixed inset-0 gridlines -z-10"></div>

<main class="relative mx-auto max-w-md px-5 py-16 md:py-24">
  <section class="halo relative rounded-3xl p-[2px]">
    <div class="glass rounded-3xl ring-1 ring-white/10 backdrop-blur-xl">
      <div class="flex items-center gap-4 p-6">
        <div class="relative">
          <div class="absolute inset-0 rounded-full blur-xl opacity-70" style="background: radial-gradient(120px 120px at 50% 50%, rgba(var(--aqua),.6), transparent 60%)"></div>
          <img src="img/logo.jpg" alt="Avatar" class="relative size-16 rounded-full ring-2 ring-white/30" />
        </div>
        <div class="min-w-0">
          <h1 class="text-xl font-semibold tracking-tight">Angkorkey</h1>
          <p class="text-white/70 text-sm">Social Media Links</p>
        </div>
      </div>

      <p class="px-6 text-sm leading-relaxed text-white/70">
        <strong> Angkorkey </strong> ផ្តល់ជូនផលិតផលដែលមានគុណភាពខ្ពស់ តម្លៃសមរម្យ និងសុវត្ថិភាពសម្រាប់អតិថិជនទាំងអស់
      </p>

      <div class="p-6 pt-4 space-y-3">
        <!-- Telegram Admin -->
        <a class="external-link group flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 backdrop-blur transition hover:border-white/20 hover:bg-white/[.08]"
           href="https://t.me/Angkorkey_admin_2"
           data-url="https://t.me/Angkorkey_admin_2">
          <svg class="size-5 opacity-80 group-hover:opacity-100" viewBox="0 0 24 24" fill="currentColor"><path d="M9.999 15.2 9.9 19c.4 0 .6-.2.8-.4l2-1.9 4.2 3.1c.8.4 1.3.2 1.5-.7l2.7-12.7c.3-1.2-.4-1.6-1.2-1.3L2.8 9.4c-1.1.4-1.1 1-.2 1.3l4.6 1.4 10.7-6.7-7.9 8.7Z"/></svg>
          <span class="flex-1 truncate">t.me/angkorkey_admin_2</span>
          <span class="text-[10px] uppercase tracking-widest text-white/60">Chat</span>
        </a>

        <!-- Telegram Channel -->
        <a class="external-link group flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 backdrop-blur transition hover:border-white/20 hover:bg-white/[.08]"
           href="https://t.me/angkorkey"
           data-url="https://t.me/angkorkey">
          <svg class="size-5 opacity-80 group-hover:opacity-100" viewBox="0 0 24 24" fill="currentColor"><path d="M9.999 15.2 9.9 19c.4 0 .6-.2.8-.4l2-1.9 4.2 3.1c.8.4 1.3.2 1.5-.7l2.7-12.7c.3-1.2-.4-1.6-1.2-1.3L2.8 9.4c-1.1.4-1.1 1-.2 1.3l4.6 1.4 10.7-6.7-7.9 8.7Z"/></svg>
          <span class="flex-1 truncate">t.me/angkorkey</span>
          <span class="text-[10px] uppercase tracking-widest text-white/60">Join</span>
        </a>

        <!-- TikTok -->
        <a class="external-link group flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 backdrop-blur transition hover:border-white/20 hover:bg-white/[.08]"
           href="https://www.tiktok.com/@angkorkey"
           data-url="https://www.tiktok.com/@angkorkey">
          <svg class="size-5 opacity-80 group-hover:opacity-100" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c.5 2.8 2.5 5 5.1 5.6v3.4c-1.7 0-3.2-.6-4.6-1.6v6.6c0 3-2.3 5.4-5.3 5.4S2 19 2 16s2.4-5.4 5.3-5.4c.3 0 .6 0 .9.1v3.3c-.3-.1-.6-.2-.9-.2-1.1 0-2 1-2 2.2s.9 2.2 2 2.2 2-1 2-2.2V2h2.7Z"/></svg>
          <span class="flex-1 truncate">tiktok.com/@angkorkey</span>
          <span class="text-[10px] uppercase tracking-widest text-white/60">Follow</span>
        </a>

        <!-- Facebook -->
        <a class="external-link group flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 backdrop-blur transition hover:border-white/20 hover:bg-white/[.08]"
           href="https://www.facebook.com/profile.php?id=61550673305154"
           data-url="https://www.facebook.com/profile.php?id=61550673305154">
          <svg class="size-5 opacity-80 group-hover:opacity-100" viewBox="0 0 24 24" fill="currentColor"><path d="M22 12A10 10 0 1 0 10.6 21.9v-6.5h-2v-3.4h2V9.4c0-2 1.2-3.2 3-3.2.9 0 1.8.2 1.8.2v2h-1c-1 0-1.3.6-1.3 1.2v1.9h2.3l-.4 3.4h-1.9v6.5A10 10 0 0 0 22 12Z"/></svg>
          <span class="flex-1 truncate">facebook.com/Angkorkey</span>
          <span class="text-[10px] uppercase tracking-widest text-white/60">Like</span>
        </a>
      </div>

      <div class="flex items-center justify-between px-6 pb-6 pt-2">
        <button id="copyHandle" class="inline-flex items-center gap-2 text-xs text-white/70 hover:text-white transition">
          <svg class="size-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="9" y="9" width="13" height="13" rx="2"/><rect x="2" y="2" width="13" height="13" rx="2"/></svg>
          Copy @angkorkey
        </button>
        <span class="text-[10px] tracking-widest text-white/50">© <span id="year"></span> · Link·Neon</span>
      </div>
    </div>
  </section>
</main>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // Copy functionality
  document.getElementById('copyHandle').addEventListener('click', () => {
    navigator.clipboard.writeText('@angkorkey').then(() => {
      const btn = document.getElementById('copyHandle');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<svg class="size-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="20 6 9 17 4 12"/></svg>Copied!';
      setTimeout(() => btn.innerHTML = originalText, 2000);
    });
  });

  // Detection functions
  function isTikTok() {
    const ua = navigator.userAgent || navigator.vendor || window.opera;
    return ua.indexOf('TikTok') > -1 || ua.indexOf('musical_ly') > -1 || ua.indexOf('Bytedance') > -1;
  }

  function isAndroid() {
    return /Android/i.test(navigator.userAgent);
  }

  function isiOS() {
    return /iPhone|iPad|iPod/i.test(navigator.userAgent);
  }

  // Show toast notification
  function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = message;
    document.body.appendChild(toast);

    setTimeout(() => toast.classList.add('show'), 100);
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => toast.remove(), 300);
    }, 3000);
  }

  // Main link handler - BEST WORKING METHOD
  function handleLinkClick(e) {
    e.preventDefault();
    e.stopPropagation();

    const url = this.getAttribute('data-url') || this.href;

    // Not in TikTok? Open normally
    if (!isTikTok()) {
      window.open(url, '_blank', 'noopener,noreferrer');
      return;
    }

    // ===== ANDROID - PROVEN WORKING METHOD =====
    if (isAndroid()) {
      // Method 1: Chrome Intent (MOST RELIABLE for Android)
      const intent = `intent:${url.replace(/^https?:\/\//, '//')}#Intent;scheme=https;action=android.intent.action.VIEW;end;`;
      window.location.href = intent;

      // Backup: Try multiple fallbacks
      setTimeout(() => {
        // Method 2: Generic browser intent
        window.location.href = `intent:${url}#Intent;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;end;`;
      }, 300);

      setTimeout(() => {
        // Method 3: Direct URL as last resort
        window.location.href = url;
      }, 600);

      return;
    }

    // ===== iOS - PROVEN WORKING METHOD =====
    if (isiOS()) {
      // Method 1: Create invisible iframe (MOST RELIABLE for iOS)
      const iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      iframe.src = url;
      document.body.appendChild(iframe);

      // Method 2: Try Safari scheme after short delay
      setTimeout(() => {
        window.location.href = url.replace(/^https?:\/\//, 'x-safari-');
      }, 100);

      // Method 3: Direct navigation as fallback
      setTimeout(() => {
        window.location.href = url;
      }, 300);

      // Method 4: Window.open as final attempt
      setTimeout(() => {
        const win = window.open(url, '_blank');
        if (!win) {
          window.location.href = url;
        }
      }, 500);

      // Clean up iframe
      setTimeout(() => {
        if (iframe.parentNode) {
          iframe.parentNode.removeChild(iframe);
        }
      }, 2000);

      // Show helpful message for iOS users
      showToast('Tap "Open in Browser" if prompted');
      return;
    }

    // Fallback for other browsers
    window.location.href = url;
  }

  // Attach handlers to all links
  document.querySelectorAll('.external-link').forEach(link => {
    link.addEventListener('click', handleLinkClick, true);
    link.addEventListener('touchend', handleLinkClick, true);
  });

  // Log detection for debugging
  console.log('TikTok:', isTikTok(), 'Android:', isAndroid(), 'iOS:', isiOS());
</script>
</body>
</html>